<div class="flex flex-col gap-8">
    @if(totalFare()){
    <div class="flex justify-end items-center">
        <div class="flex flex-col p-3 bg-sky-500 text-white text-md font-semibold">
            <span class="rounded-md mb-2 text-center">Your Total Fare for {{totalSelectedSeats()}} ticket/tickets is
                {{totalFare()}}</span>

            <button type="button" (click)="toggleDialog()" class="bg-white text-black rounded-md p-3 ">Click on the
                button
                to
                book the selected
                tickets</button>
        </div>
    </div>
    }
    <div class="flex flex-col">
        <h1 class="text-xl font-semibold font-sans">Lower Deck</h1>
        <div class="flex flex-row space-x-3 h-96  bg-white border-s-8 border-gray-500">
            <div class="px-4 mt-8">
                <span class=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                        version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 122.88 122.88"
                        style="enable-background:new 0 0 122.88 122.88" xml:space="preserve" height="50px" width="50px">
                        <g>
                            <path
                                d="M61.44,0c33.93,0,61.44,27.51,61.44,61.44c0,33.93-27.51,61.44-61.44,61.44S0,95.37,0,61.44 C0,27.51,27.51,0,61.44,0L61.44,0z M61.17,61.6c1.76,0,3.18,1.42,3.18,3.18c0,1.76-1.42,3.18-3.18,3.18 c-1.76,0-3.18-1.42-3.18-3.18C57.99,63.03,59.42,61.6,61.17,61.6L61.17,61.6z M61.2,53.28c6.34,0,11.47,5.14,11.47,11.47 c0,6.34-5.14,11.47-11.47,11.47c-6.33,0-11.47-5.14-11.47-11.47C49.73,58.41,54.87,53.28,61.2,53.28L61.2,53.28z M14.78,44.57 c4.45-12.31,13.52-22.7,24.9-28.01c15.63-7.29,34.61-7.75,50.69,4.15c9.48,7.01,12.94,12.76,17.67,22.95 c3.58,9.03,0.64,11.97-10.87,6.9c-23.79-11.77-47.84-11.24-72.12,0C16.09,56.41,11.06,51.53,14.78,44.57L14.78,44.57z M75.9,109.05 c16.62-5.23,26.32-15.81,32.27-29.3c3.87-10.43-8.26-13.97-12.52-7.1c-2.55,5.06-5.59,9.4-9.55,12.77 c-6.2,5.27-15.18,6.23-16.58,16.16C68.79,106.74,69.97,111.38,75.9,109.05L75.9,109.05z M47.26,109.05 c-16.62-5.23-26.32-15.81-32.27-29.3c-3.87-10.43,8.26-13.97,12.52-7.1c2.55,5.06,5.59,9.4,9.55,12.77 c6.2,5.27,15.18,6.23,16.58,16.16C54.37,106.74,53.19,111.38,47.26,109.05L47.26,109.05z" />
                        </g>
                    </svg></span>
            </div>
            <div class="flex flex-row my-6  border-s-2 border-gray-500">
                <div class="grid grid-rows-2 gap-6">
                    <div class="grid grid-cols-6 gap-4 p-4 bg-white">
                        @for(seat of seats;track seat;let i = $index){
                        @if(i<12){ <app-single-seat [seatNumber]="i+1" [seatFare]="$any(seat?.fare)"
                            (click)="onSeatSelection($any(seat?.isAvailable),i)" [isSelected]="$any(seat?.isSelected)"
                            [isAvailable]="$any(seat?.isAvailable)" [isBooked]="$any(seat?.isBooked)"></app-single-seat>
                            }
                            }
                    </div>
                    <div class="grid grid-cols-6 gap-4 p-4 bg-white">
                        @for(seat of seats;track seat;let i = $index){
                        @if(i>=12 && i<18){ <app-single-seat [seatNumber]="i+1" [seatFare]="$any(seat?.fare)"
                            (click)="onSeatSelection($any(seat?.isAvailable),i)" [isSelected]="$any(seat?.isSelected)"
                            [isAvailable]="$any(seat?.isAvailable)" [isBooked]="$any(seat?.isBooked)">
                            </app-single-seat>
                            }
                            }
                    </div>
                </div>
                <div class="m-6 flex flex-col gap-6">
                    @for(seat of seats;track seats; let i = $index){
                    @if(i>=18 && i<=19){ <app-single-seat seatType='Last' [seatNumber]="i+1"
                        [seatFare]="$any(seat?.fare)" (click)="onSeatSelection($any(seat?.isAvailable),i)"
                        [isSelected]="$any(seat?.isSelected)" [isAvailable]="$any(seat?.isAvailable)"
                        [isBooked]="$any(seat?.isBooked)"></app-single-seat>
                        }
                        }
                </div>
            </div>
        </div>
    </div>
    <div class="flex flex-col">
        <h1 class="text-xl font-semibold font-sans">Upper Deck</h1>
        <div class="flex flex-row space-x-3 h-96  bg-white border-s-8 border-gray-500">
            <div class="px-8 mt-8">

            </div>
            <div class="flex flex-row my-6">
                <div class="grid grid-rows-2 gap-6">
                    <div class="grid grid-cols-6 gap-4 p-4 bg-white">
                        @for(seat of seats;track seat;let i = $index){
                        @if(i>=20 && i<32){ <app-single-seat [seatNumber]="i+1" [seatFare]="$any(seat?.fare)"
                            (click)="onSeatSelection($any(seat?.isAvailable),i)" [isSelected]="$any(seat?.isSelected)"
                            [isAvailable]="$any(seat?.isAvailable)" [isBooked]="$any(seat?.isBooked)"></app-single-seat>
                            }
                            }
                    </div>
                    <div class="grid grid-cols-6 gap-4 p-4 bg-white">
                        @for(seat of seats;track seat;let i = $index){
                        @if(i>=32 && i<38){ <app-single-seat [seatNumber]="i+1" [seatFare]="$any(seat?.fare)"
                            (click)="onSeatSelection($any(seat?.isAvailable),i)" [isSelected]="$any(seat?.isSelected)"
                            [isAvailable]="$any(seat?.isAvailable)" [isBooked]="$any(seat?.isBooked)"></app-single-seat>
                            }
                            }
                    </div>
                </div>
                <div class="m-6 flex flex-col gap-6">
                    @for(seat of seats;track seats; let i = $index){
                    @if(i>=38 && i<=39){ <app-single-seat seatType='Last' [seatNumber]="i+1"
                        [seatFare]="$any(seat?.fare)" (click)="onSeatSelection($any(seat?.isAvailable),i)"
                        [isSelected]="$any(seat?.isSelected)" [isAvailable]="$any(seat?.isAvailable)"
                        [isBooked]="$any(seat?.isBooked)"></app-single-seat>
                        }
                        }
                </div>
            </div>
        </div>
    </div>
</div>

<p-dialog header="Book Ticket" [modal]="true" [(visible)]="visible" [style]="{ width: '25rem' }">
    <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
        <div class="flex justify-between items-center">
            <label for="firstName">First Name</label>
            <input type="text" formControlName="firstName">
        </div>
        @if(userForm?.get('firstName')?.touched && userForm?.get('firstName')?.errors?.['required']){
        <span class="text-red-500 font-semibold  text-md">Field is required</span>
        }
        <div class="flex justify-between items-center">
            <label for="lastName">Last Name</label>
            <input type="text" formControlName="lastName">
        </div>
        @if(userForm?.get('lastName')?.touched && userForm?.get('lastName')?.errors?.['required']){
        <span class="text-red-500 font-semibold  text-md">Field is required</span>
        }
        <div class="flex justify-between items-center">
            <label for="email">Email</label>
            <input type="text" formControlName="email">
        </div>
        @if(userForm?.get('email')?.touched && userForm?.get('email')?.errors?.['required']){
        <span class="text-red-500 font-semibold  text-md">Field is required</span>
        }
        <div class="flex justify-between items-center">
            <label for="password">Password</label>
            <input type="password" formControlName="password">
        </div>
        @if(userForm?.get('password')?.touched && userForm?.get('password')?.errors?.['required']){
        <span class="text-red-500 font-semibold  text-md">Field is required</span>
        }
        @if(userForm?.get('password')?.touched && userForm?.get('password')?.errors?.['minlength']){
        <span class="text-red-500 font-semibold  text-md">minimum length of password is 8</span>
        }
        <div class="flex justify-end items-center mt-6">
            <button type="submit" class="px-6 py-2.5 rounded-md" [disabled]="userForm.invalid"
                [ngClass]="userForm.invalid?'bg-gray-500':'bg-blue-500'">
                Submit
            </button>
            <button type="button" (click)="toggleDialog('cancel')" class="px-6 py-2.5 rounded-md bg-red-500">
                cancel
            </button>
        </div>
    </form>
</p-dialog>
<div class="flex justify-center items-center">
    <p-toast />
</div>